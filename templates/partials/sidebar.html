<!-- {% load static %}
<aside
  id="sidebar"
  class="bg-white text-slate-800 w-64 flex flex-col transition-all duration-300 ease-in-out shadow-md"
>
  <div
    id="sidebar-header"
    class="flex items-center justify-between h-16 px-6 border-b border-slate-200"
  >
    <a href="/" id="sidebar-logo">
      <img
        src="{% static '/Averybit 1.png' %}"
        alt="Averybit Logo"
        class="h-12 w-32"
      />
    </a>
    <button
      id="sidebar-toggle"
      class="text-slate-500 hover:text-slate-700 focus:outline-none"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16m-7 6h7"
        ></path>
      </svg>
    </button>
  </div>
  <nav class="flex-1 px-2 py-4 space-y-2">
    <a
      href="{% url 'dashboard' %}"
      class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100"
    >
      <svg
        class="w-5 h-5 mr-3"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"
        />
      </svg>
      <span class="sidebar-text">Dashboard</span>
    </a>
    <a
      href="{% url 'generate_questions' %}"
      class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100"
    >
      <svg
        class="w-5 h-5 mr-3"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"
        />
      </svg>
      <span class="sidebar-text">Question Paper</span>
    </a>
    <a
      href="{% url 'department_create' %}"
      class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100"
    >
      <svg
        class="w-5 h-5 mr-3"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"
        />
      </svg>
      <span class="sidebar-text">Department</span>
    </a>
    <a
      href="{% url 'skill_list' %}"
      class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100"
    >
      <svg
        class="w-5 h-5 mr-3"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-3.172 3.172a1 1 0 000 1.414l3.172 3.172m15.482 0l3.172-3.172a1 1 0 000-1.414l-3.172-3.172M12 6.072v3.072m0 0v3.072m0-3.072L15 6.072M12 9.142L9 6.072"
        />
      </svg>
      <span class="sidebar-text">Skills</span>
    </a>
  </nav>
</aside>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll("#sidebar nav a");
    navLinks.forEach((link) => {
      const linkPath = new URL(link.href).pathname;
      if (linkPath === currentPath) {
        link.classList.add("bg-slate-100");
        link.classList.add("font-semibold");
      }
    });
  });
</script> -->
{% load static %}

<aside
  id="desktop-sidebar"
  class="bg-white text-slate-800 w-64 flex-col transition-all duration-300 ease-in-out shadow-md hidden lg:flex"
>
  <div
    id="sidebar-header"
    class="flex items-center justify-between h-16 px-6 border-b border-slate-200 flex-shrink-0"
  >
    <a href="/" id="desktop-sidebar-logo">
      <img
        src="{% static '/Averybit 1.png' %}"
        alt="Averybit Logo"
        class="h-12 w-32 transition-opacity duration-300"
      />
    </a>
    <button
      id="desktop-sidebar-toggle"
      class="text-slate-500 hover:text-slate-700 focus:outline-none"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16m-7 6h7"
        ></path>
      </svg>
    </button>
  </div>
  <nav class="flex-1 px-2 py-4 space-y-2 overflow-y-auto">
    <a
      href="{% url 'dashboard' %}"
      class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100 group relative"
    >
      <svg
        class="w-5 h-5 mr-3 flex-shrink-0"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"
        />
      </svg>
      <span
        class="desktop-sidebar-text whitespace-nowrap transition-opacity duration-200"
        >Dashboard</span
      >
    </a>
    <a
      href="{% url 'generate_questions' %}"
      class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100 group relative"
    >
      <svg
        class="w-5 h-5 mr-3 flex-shrink-0"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"
        />
      </svg>
      <span
        class="desktop-sidebar-text whitespace-nowrap transition-opacity duration-200"
        >Question Paper</span
      >
    </a>
    <a
      href="{% url 'department_create' %}"
      class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100 group relative"
    >
      <svg
        class="w-5 h-5 mr-3 flex-shrink-0"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"
        />
      </svg>
      <span
        class="desktop-sidebar-text whitespace-nowrap transition-opacity duration-200"
        >Department</span
      >
    </a>
    <a
      href="{% url 'skill_list' %}"
      class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100 group relative"
    >
      <svg
        class="w-5 h-5 mr-3 flex-shrink-0"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-3.172 3.172a1 1 0 000 1.414l3.172 3.172m15.482 0l3.172-3.172a1 1 0 000-1.414l-3.172-3.172M12 6.072v3.072m0 0v3.072m0-3.072L15 6.072M12 9.142L9 6.072"
        />
      </svg>
      <span
        class="desktop-sidebar-text whitespace-nowrap transition-opacity duration-200"
        >Skills</span
      >
    </a>
  </nav>
</aside>

<div class="lg:hidden">
  <button
    id="mobile-sidebar-toggle"
    class="fixed top-4 left-4 z-40 p-2 bg-slate-100 rounded-md text-slate-600 hover:bg-slate-200"
  >
    <svg
      class="w-6 h-6"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M4 6h16M4 12h16m-7 6h7"
      ></path>
    </svg>
  </button>
  <div
    id="sidebar-overlay"
    class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden"
  ></div>
  <aside
    id="mobile-sidebar"
    class="fixed top-0 left-0 h-full bg-white text-slate-800 w-64 flex flex-col shadow-md z-30 transform -translate-x-full transition-transform duration-300 ease-in-out"
  >
    <div
      class="flex items-center justify-between h-16 px-6 border-b border-slate-200 flex-shrink-0"
    >
      <a href="/"
        ><img
          src="{% static '/Averybit 1.png' %}"
          alt="Averybit Logo"
          class="h-12 w-32"
      /></a>
      <button
        id="mobile-sidebar-close"
        class="text-slate-500 hover:text-slate-700 focus:outline-none"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          ></path>
        </svg>
      </button>
    </div>
    <nav class="flex-1 px-2 py-4 space-y-2">
      <a
        href="{% url 'dashboard' %}"
        class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100"
      >
        <svg
          class="w-5 h-5 mr-3"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"
          />
        </svg>
        <span>Dashboard</span>
      </a>
      <a
        href="{% url 'generate_questions' %}"
        class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100"
      >
        <svg
          class="w-5 h-5 mr-3"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"
          />
        </svg>
        <span>Question Paper</span>
      </a>
      <a
        href="{% url 'department_create' %}"
        class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100"
      >
        <svg
          class="w-5 h-5 mr-3"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"
          />
        </svg>
        <span>Department</span>
      </a>
      <a
        href="{% url 'skill_list' %}"
        class="flex items-center px-4 py-2.5 text-sm font-medium text-slate-700 rounded-lg hover:bg-slate-100"
      >
        <svg
          class="w-5 h-5 mr-3"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-3.172 3.172a1 1 0 000 1.414l3.172 3.172m15.482 0l3.172-3.172a1 1 0 000-1.414l-3.172-3.172M12 6.072v3.072m0 0v3.072m0-3.072L15 6.072M12 9.142L9 6.072"
          />
        </svg>
        <span>Skills</span>
      </a>
    </nav>
  </aside>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // --- DESKTOP SIDEBAR LOGIC (No Changes) ---
    const desktopSidebar = document.getElementById("desktop-sidebar");
    const desktopSidebarToggle = document.getElementById(
      "desktop-sidebar-toggle"
    );
    const desktopSidebarLogo = document.getElementById("desktop-sidebar-logo");
    const desktopSidebarTexts = document.querySelectorAll(
      ".desktop-sidebar-text"
    );
    const mainContent = document.getElementById("main-content");

    let isDesktopCollapsed = false;
    const tooltipClasses = [
      "absolute",
      "left-full",
      "ml-3",
      "px-2",
      "py-1",
      "text-sm",
      "font-medium",
      "bg-slate-800",
      "text-white",
      "rounded-md",
      "shadow-md",
      "opacity-0",
      "group-hover:opacity-100",
      "transition-opacity",
      "duration-200",
      "pointer-events-none",
      "z-10",
      "whitespace-nowrap",
    ];

    if (desktopSidebarToggle) {
      desktopSidebarToggle.addEventListener("click", () => {
        isDesktopCollapsed = !isDesktopCollapsed;
        desktopSidebar.classList.toggle("w-64");
        desktopSidebar.classList.toggle("w-20");
        desktopSidebarLogo.classList.toggle("opacity-0");
        desktopSidebarLogo.classList.toggle("pointer-events-none");
        if (mainContent) {
          mainContent.style.marginLeft = isDesktopCollapsed ? "80px" : "256px";
        }
        desktopSidebarTexts.forEach((text) => {
          text.classList.toggle("opacity-0");
          text.parentElement.classList.toggle("justify-center");
          if (isDesktopCollapsed) {
            text.classList.add(...tooltipClasses);
          } else {
            text.classList.remove(...tooltipClasses);
          }
        });
      });
    }

    // --- MOBILE SIDEBAR LOGIC (Updated) ---
    const mobileSidebar = document.getElementById("mobile-sidebar");
    const mobileSidebarToggle = document.getElementById(
      "mobile-sidebar-toggle"
    ); // Hamburger
    const mobileSidebarClose = document.getElementById("mobile-sidebar-close"); // 'X' button
    const sidebarOverlay = document.getElementById("sidebar-overlay");

    const toggleMobileSidebar = () => {
      mobileSidebar.classList.toggle("-translate-x-full");
      sidebarOverlay.classList.toggle("hidden");
      // THIS IS THE NEW LINE
      mobileSidebarToggle.classList.toggle("hidden"); // Toggle hamburger visibility
    };

    if (mobileSidebarToggle) {
      mobileSidebarToggle.addEventListener("click", toggleMobileSidebar);
    }
    if (sidebarOverlay) {
      sidebarOverlay.addEventListener("click", toggleMobileSidebar);
    }
    if (mobileSidebarClose) {
      mobileSidebarClose.addEventListener("click", toggleMobileSidebar);
    }

    // --- ACTIVE LINK HIGHLIGHT (No Changes) ---
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll(
      "#desktop-sidebar nav a, #mobile-sidebar nav a"
    );
    navLinks.forEach((link) => {
      if (link.getAttribute("href") === currentPath) {
        link.classList.add("bg-slate-100", "font-semibold");
      }
    });
  });
</script>
